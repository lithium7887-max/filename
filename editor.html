<!DOCTYPE html>
<html lang="ko" translate="no">
<head>
    <meta charset="UTF-8">
    <meta name="google" content="notranslate">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ê³ í™”ì§ˆ ì›¹ ì‚¬ì§„ í¸ì§‘ê¸° ğŸ¨ | SIMPLEIMG</title>

    <script src="https://unpkg.com/fabric@5.3.0/dist/fabric.min.js"></script>
    
    <style>
        body { font-family: 'Apple SD Gothic Neo', 'Malgun Gothic', sans-serif; background-color: #f0f2f5; text-align: center; padding: 0; margin: 0; color: #333; overflow-x: hidden; }
        h2 { margin-top: 20px; font-size: 22px; }

        .nav-bar { text-align: center; padding: 12px; background-color: #333; display: flex; justify-content: center; flex-wrap: wrap; }
        .nav-bar a { color: white; text-decoration: none; margin: 5px 10px; font-size: 14px; font-weight: bold; }

        .ui-wrapper { width: 95%; max-width: 1050px; margin: 0 auto 10px; }
        .toolbar { padding: 15px; background: white; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.08); box-sizing: border-box; }
        
        /* ë²„íŠ¼ ëª¨ë°”ì¼ ìµœì í™” */
        button, input[type="file"], select { padding: 10px 12px; margin: 3px; cursor: pointer; font-size: 13px; border: 1px solid #ddd; border-radius: 6px; background-color: #fff; vertical-align: middle; }
        #btnSave { background-color: #28a745; color: white; border: none; font-weight: bold; }
        #btnReset { background-color: #6c757d; color: white; border: none; }

        .help-text { background: #e7f5ff; color: #004085; padding: 12px; border-radius: 10px; font-size: 13px; text-align: left; border: 1px solid #b8daff; margin-bottom: 15px; line-height: 1.5; }

        /* ìº”ë²„ìŠ¤ ì˜ì—­ */
        .canvas-container-wrapper { 
            width: 98%; max-width: 1100px; min-height: 350px; margin: 20px auto; 
            display: flex; flex-direction: column; justify-content: center; align-items: center; 
            background-color: #e9ecef; border-radius: 15px; border: 2px dashed #adb5bd; 
            position: relative; overflow: hidden; touch-action: none; /* ë¸Œë¼ìš°ì € ê¸°ë³¸ ìŠ¤í¬ë¡¤ ë°©ì§€ */
        }
        .canvas-container { display: none; box-shadow: 0 5px 20px rgba(0,0,0,0.2) !important; background-color: white; }
        .canvas-placeholder { color: #6c757d; padding: 40px 20px; }

        /* í•˜ë‹¨ ì •ë³´ ì„¹ì…˜ (í’ì„±í•˜ê²Œ ìœ ì§€) */
        .info-section { max-width: 1000px; margin: 30px auto; padding: 40px 20px; text-align: left; color: #444; line-height: 1.9; background: white; border-radius: 20px; }
        .info-section h3 { color: #1a1a1a; border-left: 5px solid #007bff; padding-left: 15px; margin-top: 40px; font-size: 22px; }
        .info-section p { margin-bottom: 15px; font-size: 15px; }
        .policy-box { font-size: 14px; background: #f8f9fa; padding: 25px; border-radius: 10px; margin-top: 20px; }

        footer { padding: 50px 0; font-size: 13px; color: #888; background: #fff; border-top: 1px solid #eee; }
    </style>
</head>
<body>

    <div class="nav-bar">
        <a href="index.html">ğŸ”„ íŒŒì¼ ì´ë¦„ ë³€ê²½</a>
        <a href="editor.html" style="color: #ffcc80;">ğŸ¨ ì‚¬ì§„ í¸ì§‘ & ë„ì¥</a>
    </div>

    <h2>ë‚˜ë§Œì˜ ê³ í™”ì§ˆ ì‚¬ì§„ í¸ì§‘ê¸° ğŸ¨</h2>
    
    <div class="ui-wrapper">
        <div class="help-text">
            <b>ğŸ’» PC</b>: íœ (í™•ëŒ€), Alt+ë“œë˜ê·¸(ì´ë™)<br>
            <b>ğŸ“± ëª¨ë°”ì¼</b>: <b>ë‘ ì†ê°€ë½ ë“œë˜ê·¸(í™”ë©´ ì´ë™)</b>, ë‘ ì†ê°€ë½ ë²Œë¦¬ê¸°(í™•ëŒ€)
        </div>
    </div>

    <div class="ui-wrapper">
        <div class="toolbar">
            <div style="border-bottom: 1px solid #eee; padding-bottom: 10px; margin-bottom: 10px;">
                <input type="file" id="imageLoader" accept="image/*" />
                <button id="btnRect">ğŸŸ¥ ì‚¬ê°í˜•</button>
                <button id="btnCircle">ğŸ”µ ì›</button>
                <button id="btnArrow">â†—ï¸ í™”ì‚´í‘œ</button>
                <button id="btnText">ğŸ“ í…ìŠ¤íŠ¸</button>
                <button id="btnDelete">ğŸ—‘ï¸ ì‚­ì œ</button>
                <button id="btnReset">ğŸ”„ ì´ˆê¸°í™”</button>
                <button id="btnSave">ğŸ’¾ ì €ì¥</button>
            </div>
            <div>
                ğŸ¨ <input type="color" id="colorPicker" value="#FF0000"> 
                ğŸ“ <input type="range" id="lineWidth" min="1" max="50" value="8" style="width:80px;">
                ğŸ˜€ <select id="emojiSelect"><option value="â­">â­</option><option value="âœ…">âœ…</option><option value="â¤ï¸">â¤ï¸</option></select>
                <button id="btnEmoji">â•</button>
                <button id="btnSticker">ğŸŒŸ ìŠ¤í‹°ì»¤</button>
                <input type="file" id="stickerLoader" style="display: none;" />
            </div>
        </div>
    </div>

    <div class="canvas-container-wrapper" id="drop-area">
        <div class="canvas-placeholder" id="placeholder-text">
            <b>í¸ì§‘í•  ì‚¬ì§„ì„ ë¶ˆëŸ¬ì˜¤ì„¸ìš”.</b>
        </div>
        <canvas id="myCanvas"></canvas>
    </div>

    <div class="info-section">
        <h3>1. SIMPLEIMG ëª¨ë°”ì¼&PC í†µí•© í¸ì§‘ ê°€ì´ë“œ</h3>
        <p>ë³¸ ì„œë¹„ìŠ¤ëŠ” PCë¿ë§Œ ì•„ë‹ˆë¼ ëª¨ë°”ì¼ í™˜ê²½ì—ì„œë„ ìµœì ì˜ í¸ì§‘ ê²½í—˜ì„ ì œê³µí•˜ê¸° ìœ„í•´ ì„¤ê³„ë˜ì—ˆìŠµë‹ˆë‹¤. ë³„ë„ì˜ ì•± ì„¤ì¹˜ ì—†ì´ ë¸Œë¼ìš°ì €ì—ì„œ ì¦‰ì‹œ ì‚¬ì§„ì„ ë¶ˆëŸ¬ì™€ ì‚¬ê°í˜•, ì›, í™”ì‚´í‘œ ë“± í•„ìˆ˜ì ì¸ ë§ˆí¬ì—… ë„êµ¬ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
        
        <h3>2. ëª¨ë°”ì¼ ì¡°ì‘ë²• ì•ˆë‚´ (Touch Control)</h3>
        <p>í™”ë©´ì´ ì‘ì€ ëª¨ë°”ì¼ ê¸°ê¸°ì—ì„œëŠ” ì •ë°€í•œ ì‘ì—…ì´ ì¤‘ìš”í•©ë‹ˆë‹¤. ë‹¤ìŒ ì¡°ì‘ë²•ì„ ìˆ™ì§€í•´ ë³´ì„¸ìš”.</p>
        <ul>
            <li><strong>í™”ë©´ ì´ë™:</strong> ì´ë¯¸ì§€ë¥¼ ë¶ˆëŸ¬ì˜¨ í›„, <b>ë‘ ì†ê°€ë½</b>ì„ í™”ë©´ì— ëŒ€ê³  ë™ì‹œì— ì›€ì§ì´ë©´ ìº”ë²„ìŠ¤ ì „ì²´ê°€ ì´ë™í•©ë‹ˆë‹¤.</li>
            <li><strong>í™•ëŒ€/ì¶•ì†Œ:</strong> ë‘ ì†ê°€ë½ì„ ë²Œë¦¬ê±°ë‚˜ ì˜¤ë¯€ë ¤ ì´ë¯¸ì§€ë¥¼ í¬ê²Œ ë³´ê±°ë‚˜ ì‘ê²Œ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
            <li><strong>ë„í˜• ìˆ˜ì •:</strong> ë„í˜•ì„ í„°ì¹˜í•˜ë©´ ë‚˜íƒ€ë‚˜ëŠ” ì¡°ì ˆì ì„ í†µí•´ í¬ê¸°ì™€ ê°ë„ë¥¼ ììœ ìì¬ë¡œ ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
        </ul>

        <h3>3. ê°œì¸ì •ë³´ ë³´í˜¸ ë° ë°ì´í„° ë³´ì•ˆ</h3>
        <div class="policy-box">
            <p><strong>ì„œë²„ ë¯¸ì „ì†¡ ì›ì¹™:</strong> ê·€í•˜ê°€ í¸ì§‘í•˜ëŠ” ì‚¬ì§„ì€ ë‹¹ì‚¬ ì„œë²„ë¡œ ì ˆëŒ€ ì „ì†¡ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ëª¨ë“  ê³¼ì •ì€ ê¸°ê¸° ë‚´ë¶€ì˜ ë©”ëª¨ë¦¬ì—ì„œë§Œ ì²˜ë¦¬ë˜ë¯€ë¡œ ì•ˆì‹¬í•˜ê³  ì‚¬ìš©í•˜ì„¸ìš”.</p>
        </div>
    </div>

    <footer>
        <p>Â© 2026 SIMPLEIMG. admin@simpleimg.co.kr</p>
    </footer>

    <script>
        window.onload = function() {
            const canvas = new fabric.Canvas('myCanvas', { allowTouchScrolling: false });
            const colorPicker = document.getElementById('colorPicker');
            const lineWidthSlider = document.getElementById('lineWidth');
            const fileInput = document.getElementById('imageLoader');

            // --- [í•µì‹¬: ëª¨ë°”ì¼ ë‘ ì†ê°€ë½ í„°ì¹˜ ë¡œì§] ---
            let m_isDragging = false;
            let m_lastPosX, m_lastPosY;
            let m_lastDist = 0; // í•€ì¹˜ ì¤Œ ê±°ë¦¬ ì €ì¥ìš©

            canvas.on('mouse:down', function(opt) {
                const evt = opt.e;
                // PC Altí‚¤ ë“œë˜ê·¸ ë˜ëŠ” ëª¨ë°”ì¼ ë‘ ì†ê°€ë½ í„°ì¹˜ ì‹œ ì´ë™ ëª¨ë“œ í™œì„±í™”
                if (evt.altKey || (evt.touches && evt.touches.length === 2)) {
                    m_isDragging = true;
                    m_lastPosX = evt.touches ? evt.touches[0].clientX : evt.clientX;
                    m_lastPosY = evt.touches ? evt.touches[0].clientY : evt.clientY;
                    canvas.selection = false; // ì´ë™ ì¤‘ì—ëŠ” ë“œë˜ê·¸ ì„ íƒ ë„ê¸°
                }
            });

            canvas.on('mouse:move', function(opt) {
                if (m_isDragging) {
                    const evt = opt.e;
                    const clientX = evt.touches ? evt.touches[0].clientX : evt.clientX;
                    const clientY = evt.touches ? evt.touches[0].clientY : evt.clientY;

                    // í™”ë©´ ì´ë™ ê³„ì‚°
                    const vpt = canvas.viewportTransform;
                    vpt[4] += clientX - m_lastPosX;
                    vpt[5] += clientY - m_lastPosY;
                    canvas.requestRenderAll();

                    m_lastPosX = clientX;
                    m_lastPosY = clientY;

                    // ëª¨ë°”ì¼ í•€ì¹˜ ì¤Œ ì²˜ë¦¬
                    if (evt.touches && evt.touches.length === 2) {
                        const dist = Math.hypot(
                            evt.touches[0].pageX - evt.touches[1].pageX,
                            evt.touches[0].pageY - evt.touches[1].pageY
                        );
                        if (m_lastDist > 0) {
                            const zoom = canvas.getZoom() * (dist / m_lastDist);
                            canvas.zoomToPoint({ x: (evt.touches[0].pageX + evt.touches[1].pageX)/2, y: (evt.touches[0].pageY + evt.touches[1].pageY)/2 }, zoom);
                        }
                        m_lastDist = dist;
                    }
                }
            });

            canvas.on('mouse:up', function() {
                m_isDragging = false;
                m_lastDist = 0;
                canvas.selection = true;
            });

            // ë§ˆìš°ìŠ¤ íœ  ì¤Œ (PCìš©)
            canvas.on('mouse:wheel', function(opt) {
                var delta = opt.e.deltaY;
                var zoom = canvas.getZoom();
                zoom *= 0.999 ** delta;
                if (zoom > 20) zoom = 20; if (zoom < 0.1) zoom = 0.1;
                canvas.zoomToPoint({ x: opt.e.offsetX, y: opt.e.offsetY }, zoom);
                opt.e.preventDefault(); opt.e.stopPropagation();
            });

            // ì‹¤ì‹œê°„ ìƒ‰ìƒ/ë‘ê»˜ ë³€ê²½
            function updateStyle() {
                const obj = canvas.getActiveObject();
                if (!obj) return;
                const color = colorPicker.value;
                if (obj.type.includes('text')) obj.set('fill', color);
                else if (obj.fill !== 'transparent') obj.set({fill: color, stroke: color});
                else obj.set({stroke: color, strokeWidth: parseInt(lineWidthSlider.value)});
                canvas.renderAll();
            }
            colorPicker.oninput = updateStyle;
            lineWidthSlider.oninput = updateStyle;

            // ì‚¬ì§„ ë¡œë“œ/ì´ˆê¸°í™”/ì €ì¥/ë„í˜• ìƒì„± (ê¸°ì¡´ ê¸°ëŠ¥ ìœ ì§€)
            fileInput.onchange = function(e) {
                const file = e.target.files[0];
                const reader = new FileReader();
                reader.onload = function(f) {
                    fabric.Image.fromURL(f.target.result, function(img) {
                        document.getElementById('placeholder-text').style.display = 'none';
                        document.getElementById('drop-area').style.minHeight = 'auto';
                        canvas.setWidth(img.width); canvas.setHeight(img.height);
                        canvas.setBackgroundImage(img, canvas.renderAll.bind(canvas));
                        document.querySelector('.canvas-container').style.display = 'block';
                    });
                };
                reader.readAsDataURL(file);
            };

            document.getElementById('btnReset').onclick = () => { if(confirm('ì´ˆê¸°í™”í• ê¹Œìš”?')) location.reload(); };
            document.getElementById('btnSave').onclick = () => {
                canvas.discardActiveObject().renderAll();
                const link = document.createElement('a');
                link.download = 'edited.png';
                link.href = canvas.toDataURL({ format: 'png', quality: 1 });
                link.click();
            };

            // ë„í˜• ë²„íŠ¼ë“¤
            document.getElementById('btnRect').onclick = () => canvas.add(new fabric.Rect({ left: 50, top: 50, width: 150, height: 100, fill: 'transparent', stroke: colorPicker.value, strokeWidth: 5 }));
            document.getElementById('btnCircle').onclick = () => canvas.add(new fabric.Circle({ left: 50, top: 50, radius: 50, fill: 'transparent', stroke: colorPicker.value, strokeWidth: 5 }));
            document.getElementById('btnText').onclick = () => canvas.add(new fabric.IText('ì…ë ¥', { left: 50, top: 50, fill: colorPicker.value }));
            document.getElementById('btnDelete').onclick = () => canvas.remove(canvas.getActiveObject());
        };
    </script>
</body>
</html>
