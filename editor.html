<!DOCTYPE html>
<html lang="ko" translate="no">
<head>
    <meta charset="UTF-8">
    <meta name="google" content="notranslate">
    <title>ê³ í™”ì§ˆ ì›¹ ì‚¬ì§„ í¸ì§‘ê¸° ğŸ¨ | SIMPLEIMG - ë¬´ì„¤ì¹˜ ì˜¨ë¼ì¸ ì´ë¯¸ì§€ ë§ˆí¬ì—… íˆ´</title>

    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0000000000000000" crossorigin="anonymous"></script>
    <script src="https://unpkg.com/fabric@5.3.0/dist/fabric.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/exif-js"></script>
    
    <style>
        body { font-family: 'Apple SD Gothic Neo', 'Malgun Gothic', sans-serif; background-color: #f0f2f5; text-align: center; padding: 0; margin: 0; color: #333; }
        h2 { margin-top: 30px; margin-bottom: 25px; }

        .nav-bar { text-align: center; padding: 15px 10px; background-color: #333; margin-bottom: 20px; }
        .nav-bar a { color: white; text-decoration: none; margin: 0 15px; font-weight: bold; }
        .nav-bar a:hover { color: #ffcc80; }

        .ui-wrapper { display: block; width: 95%; max-width: 1050px; margin: 0 auto 15px; }
        .toolbar { padding: 20px; background: white; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.08); width: 100%; box-sizing: border-box; }
        .button-group { margin-bottom: 15px; padding-bottom: 15px; border-bottom: 1px solid #eee; }
        .control-group { background: #f8f9fa; padding: 8px 15px; border-radius: 6px; display: inline-block; border: 1px solid #e9ecef; margin: 5px; vertical-align: middle; }
        
        button, input[type="file"], select { padding: 10px 18px; margin: 4px; cursor: pointer; font-size: 14px; border: 1px solid #ddd; border-radius: 6px; background-color: #fff; transition: all 0.2s; vertical-align: middle; font-weight: 500; color: #555; }
        button:hover { background-color: #f1f3f5; border-color: #ccc; }
        
        #btnSave { background-color: #28a745; color: white; border: none; }
        #btnSave:hover { background-color: #218838; }
        #btnSticker { background-color: #fff3cd; color: #856404; border: 1px solid #ffeeba; }
        #btnDelete { color: #dc3545; border-color: #dc3545; }
        #btnReset { background-color: #6c757d; color: white; border: none; }
        #btnRotateLeft, #btnRotateRight { background-color: #e2e6ea; color: #333; }
        #btnRotateLeft:hover, #btnRotateRight:hover { background-color: #d3d9df; }
        
        #btnMosaic { background-color: #e3f2fd; color: #0d47a1; border: 1px solid #bbdefb; font-weight: bold; }
        #btnMosaic:hover { background-color: #bbdefb; }
        
        #btnApplyMosaic { display: none; background-color: #17a2b8; color: white; font-weight: bold; border: none; box-shadow: 0 2px 5px rgba(0,0,0,0.2); animation: pulse 1.5s infinite; }
        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.05); } 100% { transform: scale(1); } }

        .help-text { background: #e7f5ff; color: #004085; padding: 15px 20px; border-radius: 10px; font-size: 14px; text-align: left; border: 1px solid #b8daff; width: 100%; box-sizing: border-box; display: flex; align-items: center; margin-bottom: 20px; }
        .help-icon { font-size: 20px; margin-right: 15px; }

        .canvas-container-wrapper { width: 95%; max-width: 900px; min-height: 450px; margin: 30px auto; display: flex; flex-direction: column; justify-content: center; align-items: center; background-color: #e9ecef; border-radius: 15px; border: 2px dashed #adb5bd; padding: 20px; box-sizing: border-box; overflow: auto; transition: all 0.2s ease; }
        .canvas-container { display: none; box-shadow: 0 10px 40px rgba(0,0,0,0.2) !important; background-color: white; border-radius: 4px; }
        .canvas-placeholder { color: #6c757d; text-align: center; }

        .info-section { max-width: 1000px; margin: 40px auto; padding: 60px; text-align: left; color: #444; line-height: 2.1; background: white; border-radius: 20px; box-shadow: 0 4px 25px rgba(0,0,0,0.06); }
        .info-section h3 { color: #1a1a1a; border-left: 6px solid #007bff; padding-left: 20px; margin-top: 50px; margin-bottom: 25px; font-size: 26px; }
        .info-section h4 { color: #2c3e50; margin-top: 35px; margin-bottom: 15px; font-size: 20px; font-weight: 700; border-bottom: 1px solid #eee; padding-bottom: 10px; }
        .info-section p { margin-bottom: 22px; font-size: 16px; color: #555; }
        .info-section ul { padding-left: 20px; margin-bottom: 35px; }
        .info-section li { margin-bottom: 15px; font-size: 16px; list-style-type: square; }
        .policy-box { font-size: 15px; color: #555; background: #f8f9fa; padding: 35px; border: 1px solid #e9ecef; border-radius: 12px; margin-top: 35px; }

        .ad-container { width: 95%; max-width: 1050px; min-height: 100px; margin: 25px auto; background-color: #fafafa; border: 1px dashed #bbb; display: flex; align-items: center; justify-content: center; text-align: center; border-radius: 10px; }
        footer { text-align: center; padding: 70px 0; font-size: 14px; color: #888; border-top: 1px solid #eee; background-color: #fff; }
        footer a { color: #007bff; text-decoration: none; margin: 0 15px; font-weight: 500; }
    </style>
</head>
<body>

    <div class="nav-bar">
        <a href="index.html">ğŸ”„ íŒŒì¼ ì´ë¦„ ì¼ê´„ ë³€ê²½</a>
        <a href="editor.html" style="color: #ffcc80;">ğŸ¨ ì‚¬ì§„ í¸ì§‘ & ë„ì¥ ì°ê¸°</a>
    </div>

    <h2>ë‚˜ë§Œì˜ ê³ í™”ì§ˆ ì›¹ ì‚¬ì§„ í¸ì§‘ íˆ´ ğŸ¨</h2>

    <div class="ad-container" id="top-ad"><div style="font-size: 12px; color: #aaa;">ADVERTISEMENT</div></div>
    
    <div class="ui-wrapper">
        <div class="help-text">
            <div class="help-icon">ğŸ’¡</div>
            <div class="help-content">
                <b>ë§ˆìš°ìŠ¤ íœ </b>: í™”ë©´ í™•ëŒ€/ì¶•ì†Œ | <b>Alt + ë§ˆìš°ìŠ¤ ë“œë˜ê·¸</b>: í™”ë©´ ì´ë™<br>
                <b>ëª¨ìì´í¬ ë°©ë²•</b>: [ğŸŒ«ï¸ ëª¨ìì´í¬ ë°•ìŠ¤] ë²„íŠ¼ í´ë¦­ í›„, ì˜ì—­ì„ ì¡ê³  <b>[âœ… ì˜ì—­ í™•ì •]</b> ë²„íŠ¼ì„ ëˆ„ë¥´ì„¸ìš”. <span style="color:#d63384; font-weight:500;">(â€» 'ğŸ“ ì„  ë‘ê»˜'ë¥¼ ì¡°ì ˆí•˜ë©´ ëª¨ìì´í¬ ê°•ë„ê°€ ë³€í•©ë‹ˆë‹¤)</span>
            </div>
        </div>
    </div>

    <div class="ui-wrapper">
        <div class="toolbar">
            <div class="button-group">
                <input type="file" id="imageLoader" accept="image/*" />
                <button id="btnRotateLeft">ğŸ”„ ì™¼ìª½ 90ë„</button>
                <button id="btnRotateRight">ğŸ”„ ì˜¤ë¥¸ìª½ 90ë„</button>
                <button id="btnMosaic">ğŸŒ«ï¸ ëª¨ìì´í¬ ë°•ìŠ¤</button>
                <button id="btnApplyMosaic">âœ… ì˜ì—­ í™•ì •</button>
                | 
                <button id="btnRect">ğŸŸ¥ ë¹ˆ ì‚¬ê°í˜•</button>
                <button id="btnHollowCircle">â­• ë¹ˆ ì›</button>
                <button id="btnCircle">ğŸ”µ ê½‰ ì°¬ ì›</button>
                <button id="btnArrow">â†—ï¸ í™”ì‚´í‘œ</button>
                <button id="btnText">ğŸ“ í…ìŠ¤íŠ¸</button>
                <button id="btnDelete">ğŸ—‘ï¸ ì„ íƒ ì‚­ì œ</button>
                <button id="btnReset">ğŸ”„ ì‚¬ì§„ ì´ˆê¸°í™”</button>
                <button id="btnSave">ğŸ’¾ ê³ í™”ì§ˆ ì €ì¥</button>
            </div>
            
            <div class="control-group">
                ğŸ¨ ìƒ‰ìƒ ë³€ê²½ <input type="color" id="colorPicker" value="#FF0000"> | 
                ğŸ“ ì„  ë‘ê»˜ <input type="range" id="lineWidth" min="1" max="50" value="10">
            </div>
            
            <div class="control-group" style="background: #fff9e6;">
                ğŸ˜€ ì´ëª¨ì§€ 
                <select id="emojiSelect">
                     <option value="â­">â­ ë³„</option>
                        <option value="â¤ï¸">â¤ï¸ í•˜íŠ¸</option>
                        <option value="ğŸ‘">ğŸ‘ ë”°ë´‰</option>
                        <option value="âœ…">âœ… ì²´í¬</option>
                        <option value="â­•">â­• ë¹ˆ ë™ê·¸ë¼ë¯¸(O)</option>
                        <option value="âŒ">âŒ ì—‘ìŠ¤í‘œ</option>
                        <option value="â“">â“ ë¬¼ìŒí‘œ</option>
                        <option value="â—">â— ëŠë‚Œí‘œ</option>
                        <option value="ğŸ’¯">ğŸ’¯ êµ¿ (100ì )</option>
                        <option value="ğŸ‘">ğŸ‘ ë°°ë“œ (ìš°ìš°~)</option>
                        <option value="ğŸ†—">ğŸ†— ì˜¤ì¼€ì´ (ë§ˆí¬)</option>
                        <option value="ğŸ˜Š">ğŸ˜Š ìŠ¤ë§ˆì¼</option>
                        <option value="ğŸ”¥">ğŸ”¥ ë¶ˆê½ƒ</option>
                        <option value="âœ¨">âœ¨ ë°˜ì§ì´</option>
                        <option value="ì›ƒ">ì›ƒ (ì¡¸ë¼ë§¨)</option>
                        <option value="ì˜·">ì˜· (ë§Œì„¸ë§¨)</option>
                        <option value="ğŸƒ">ğŸƒ ë‹¬ë¦¬ëŠ” ì‚¬ëŒ</option>
                        <option value="ğŸ•º">ğŸ•º ì¶¤ì¶”ëŠ” ì‚¬ëŒ</option>
                        <option value="ğŸ¤º">ğŸ¤º íœì‹± (ì‹¸ìš°ëŠ” ì‚¬ëŒ)</option>
                        <option value="ğŸ‘ GOOD!">ğŸ‘ GOOD! (ê¸€ì)</option>
                        <option value="ğŸ‘ BAD...">ğŸ‘ BAD... (ê¸€ì)</option>   
                </select>
                <button id="btnEmoji">â• ë„£ê¸°</button>
                <button id="btnSticker">ğŸŒŸ ë‚´ ìŠ¤í‹°ì»¤</button>
                <input type="file" id="stickerLoader" style="display: none;" />
            </div>
        </div>
    </div>

    <div class="canvas-container-wrapper" id="drop-area">
        <div class="canvas-placeholder" id="placeholder-text">
            <div style="font-size: 50px; margin-bottom: 10px;">ğŸ–¼ï¸</div>
            <b>í¸ì§‘í•  ì‚¬ì§„ì„ ì„ íƒí•˜ê±°ë‚˜ ë“œë˜ê·¸í•˜ì—¬ ë†“ìœ¼ì„¸ìš”.</b><br>
            <span style="font-size: 13px; opacity: 0.8;">ëª¨ë“  ì‘ì—…ì€ ë¸Œë¼ìš°ì € ë¡œì»¬ í™˜ê²½ì—ì„œ ì•ˆì „í•˜ê²Œ ì²˜ë¦¬ë©ë‹ˆë‹¤.</span>
        </div>
        <canvas id="myCanvas"></canvas>
    </div>

    <div class="ad-container" id="bottom-ad"><div style="font-size: 12px; color: #aaa;">ADVERTISEMENT</div></div>

    <div class="info-section">
        <h3>1. SIMPLEIMG: ì°¨ì„¸ëŒ€ ì›¹ ê¸°ë°˜ ê³ í™”ì§ˆ ì´ë¯¸ì§€ ë§ˆí¬ì—… ì†”ë£¨ì…˜</h3>
        <p>ë³µì¡í•œ ì„¤ì¹˜ ê³¼ì • ì—†ì´ ì›¹ ë¸Œë¼ìš°ì €ë§Œìœ¼ë¡œ ì „ë¬¸ê°€ ìˆ˜ì¤€ì˜ ì‚¬ì§„ ë§ˆí¬ì—…ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤. <strong>SIMPLEIMG ê³ í™”ì§ˆ ì‚¬ì§„ í¸ì§‘ê¸°</strong>ëŠ” ê¸°ì—…ìš© ë³´ê³ ì„œ ì‘ì„±, ë¸”ë¡œê·¸ í¬ìŠ¤íŒ… ì´ë¯¸ì§€ ì œì‘, í˜„ì¥ ì‚¬ì§„ ë¶ˆëŸ‰ ì²´í¬ ë“± ë‹¤ì–‘í•œ ë¹„ì¦ˆë‹ˆìŠ¤ ë° ê°œì¸ ìš©ë„ë¡œ ìµœì í™”ëœ ë„êµ¬ì…ë‹ˆë‹¤.</p>
        
        <h4>ì™œ SIMPLEIMGê°€ íŠ¹ë³„í•œê°€ìš”?</h4>
        <p>ì¼ë°˜ì ì¸ ì˜¨ë¼ì¸ ì—ë””í„°ë“¤ì€ ì´ë¯¸ì§€ë¥¼ ì„œë²„ë¡œ ì—…ë¡œë“œí•˜ì—¬ ì²˜ë¦¬í•˜ëŠ” ê³¼ì •ì—ì„œ í•´ìƒë„ë¥¼ ê°•ì œë¡œ ë‚®ì¶”ê±°ë‚˜ ê°œì¸ì •ë³´ ìœ ì¶œì˜ ìœ„í—˜ì„ ì•ˆê³  ìˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ë³¸ ì„œë¹„ìŠ¤ëŠ” 'í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œ(Client-Side)' ê¸°ìˆ ë ¥ì„ ë°”íƒ•ìœ¼ë¡œ ì‚¬ìš©ìì˜ ì»´í“¨í„° ë¦¬ì†ŒìŠ¤ë¥¼ ì§ì ‘ í™œìš©í•˜ì—¬ í¸ì§‘í•©ë‹ˆë‹¤.</p>

        <h3>2. ì—…ë¬´ íš¨ìœ¨ì„ ê·¹ëŒ€í™”í•˜ëŠ” í•µì‹¬ ê¸°ëŠ¥ ìƒì„¸ ì•ˆë‚´</h3>
        <ul>
            <li><strong>ì§€ëŠ¥í˜• ì‹¤ì‹œê°„ ìŠ¤íƒ€ì¼ ë³€ê²½:</strong> ì´ë¯¸ ë°°ì¹˜ëœ ë„í˜•ì´ë‚˜ í…ìŠ¤íŠ¸ë¥¼ ë§ˆìš°ìŠ¤ë¡œ ì„ íƒí•œ í›„ ìƒë‹¨ íˆ´ë°”ì˜ ìƒ‰ìƒ í”¼ì»¤ë‚˜ ì„  ë‘ê»˜ ìŠ¬ë¼ì´ë”ë¥¼ ì¡°ì‘í•˜ë©´, ì‘ì—…ë¬¼ì´ ì‹¤ì‹œê°„ìœ¼ë¡œ ë³€í•˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
            <li><strong>ì´ˆê³ í™”ì§ˆ ì›ë³¸ ìœ ì§€ ì €ì¥:</strong> ì›ë³¸ ì´ë¯¸ì§€ì˜ í”½ì…€ ì •ë³´ë¥¼ ì†ì‹¤ ì—†ì´ ìº”ë²„ìŠ¤ì— ë Œë”ë§í•©ë‹ˆë‹¤. 'ê³ í™”ì§ˆ ì €ì¥' ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ë©´ í¸ì§‘ëœ ìš”ì†Œë“¤ì´ í¬í•¨ëœ ìƒíƒœë¡œ ì›ë³¸ì˜ í•´ìƒë„ë¥¼ ìµœëŒ€í•œ ìœ ì§€í•œ PNG íŒŒì¼ì„ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
            <li><strong>ì •ë°€ ë·°í¬íŠ¸ ì¡°ì‘:</strong> ë§ˆìš°ìŠ¤ íœ ì„ í†µí•œ ììœ ë¡œìš´ í™•ëŒ€/ì¶•ì†Œ ê¸°ëŠ¥ê³¼ Alt í‚¤ë¥¼ í™œìš©í•œ ë“œë˜ê·¸ ì´ë™(Pan) ê¸°ëŠ¥ì„ ì¡°í•©í•˜ë©´, 4K ì´ìƒì˜ ì´ˆê³ í•´ìƒë„ ì´ë¯¸ì§€ë„ ë¯¸ì„¸í•œ ë‹¨ìœ„ê¹Œì§€ ì •ë°€í•˜ê²Œ ë§ˆí‚¹í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
        </ul>

        <h3>3. ì‚¬ìš©ì ì¤‘ì‹¬ì˜ ì¸í„°í˜ì´ìŠ¤ ê°€ì´ë“œ (FAQ)</h3>
        <h4>Q: ì‚¬ì§„ì„ ì—¬ëŸ¬ ì¥ í•œêº¼ë²ˆì— í¸ì§‘í•  ìˆ˜ ìˆë‚˜ìš”?</h4>
        <p>A: í˜„ì¬ ë²„ì „ì€ ë‹¨ì¼ ì´ë¯¸ì§€ì— ëŒ€í•œ ì •ë°€ í¸ì§‘ì„ ì§€ì›í•©ë‹ˆë‹¤. í•œ ì¥ì˜ í¸ì§‘ì„ ë§ˆì¹˜ê³  'ì‚¬ì§„ ì´ˆê¸°í™”' ë²„íŠ¼ì„ ëˆŒëŸ¬ ë‹¤ìŒ ì‘ì—…ì„ ì¦‰ì‹œ ì§„í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
        <h4>Q: ì¸í„°ë„· ì—°ê²°ì´ ëŠê²¨ë„ ì‘ë™í•˜ë‚˜ìš”?</h4>
        <p>A: ë„¤, ì‚¬ì´íŠ¸ê°€ í•œ ë²ˆ ë¡œë”©ëœ í›„ì—ëŠ” ëª¨ë“  ê¸°ëŠ¥ì´ ì‚¬ìš©ìì˜ ê¸°ê¸° ë‚´ë¶€ ë©”ëª¨ë¦¬ì—ì„œ ì‘ë™í•˜ë¯€ë¡œ ì˜¤í”„ë¼ì¸ í™˜ê²½ì—ì„œë„ ì•ˆì •ì ì¸ í¸ì§‘ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.</p>

        <h3>4. ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨ (Privacy Policy)</h3>
        <div class="policy-box">
            <p><strong>ì œ1ì¡° (ë°ì´í„° ë³´ì•ˆ)</strong> ì‚¬ìš©ìê°€ í¸ì§‘ì„ ìœ„í•´ ì„ íƒí•˜ëŠ” ëª¨ë“  ì‚¬ì§„ íŒŒì¼ì€ ë‹¹ì‚¬ì˜ ì„œë²„ë¡œ ì „ì†¡ë˜ê±°ë‚˜ ì €ì¥ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ëª¨ë“  í¸ì§‘ ë°ì´í„°ëŠ” ì‚¬ìš©ìì˜ ì›¹ ë¸Œë¼ìš°ì € ë‚´ì—ì„œ ì‹¤ì‹œê°„ìœ¼ë¡œ ì²˜ë¦¬ëœ í›„ íœ˜ë°œë©ë‹ˆë‹¤.</p>
            <p><strong>ì œ2ì¡° (ì œ3ì ì„œë¹„ìŠ¤ ì´ìš©)</strong> ë³¸ ì„œë¹„ìŠ¤ëŠ” Google AdSenseë¥¼ í†µí•´ ìˆ˜ìµì„ ì°½ì¶œí•˜ë©°, Googleì€ ê´‘ê³  ì œê³µì„ ìœ„í•´ ì¿ í‚¤ë¥¼ í™œìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
            <p style="margin-top: 20px; font-weight: bold; border-top: 1px solid #ddd; padding-top: 15px;">ìµœì¢… ì—…ë°ì´íŠ¸ì¼: 2026ë…„ 2ì›” 25ì¼ | ì±…ì„ ê´€ë¦¬ì: SIMPLEIMG íŒ€</p>
        </div>
    </div>

    <footer>
        <p><b>Â© 2026 SIMPLEIMG. All rights reserved.</b></p>
        <p style="margin: 25px 0;">
            <a href="privacy.html">ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨</a> | <a href="terms.html">ì´ìš©ì•½ê´€</a> | <a href="contact.html">ì œíœ´ ë¬¸ì˜</a>
        </p>
        <p style="font-size: 13px; color: #aaa;">Email: admin@simpleimg.co.kr | No-Install High Quality Photo Editor</p>
    </footer>

    <script>
        if (typeof fabric !== 'undefined') {
            fabric.Object.prototype.set({ cornerSize: 12, transparentCorners: false, borderColor: '#007bff', cornerColor: '#007bff' });
        }

        window.onload = function() {
            // ğŸš© í•µì‹¬ ìˆ˜ì •: Retina ìŠ¤ì¼€ì¼ë§ì„ êº¼ì„œ í¬ê¸° ë²„ê·¸ ì›ì²œ ì°¨ë‹¨
            const canvas = new fabric.Canvas('myCanvas', { enableRetinaScaling: false });
            
            const colorPicker = document.getElementById('colorPicker');
            const lineWidthSlider = document.getElementById('lineWidth');
            const emojiSelect = document.getElementById('emojiSelect');
            const placeholder = document.getElementById('placeholder-text');
            const dropArea = document.getElementById('drop-area');
            const fileInput = document.getElementById('imageLoader');

            // ğŸ¨ ì‹¤ì‹œê°„ ìŠ¤íƒ€ì¼ ì—…ë°ì´íŠ¸
            function updateActiveObjectStyle() {
                const activeObj = canvas.getActiveObject();
                if (!activeObj || activeObj.isMosaicMarker) return;

                const color = colorPicker.value;
                const width = parseInt(lineWidthSlider.value);

                if (activeObj.type === 'i-text' || activeObj.type === 'text') {
                    activeObj.set('fill', color);
                } else if (activeObj.type === 'path' || (activeObj.fill && activeObj.fill !== 'transparent')) {
                    activeObj.set('fill', color);
                    if (activeObj.stroke) activeObj.set('stroke', color);
                } else {
                    activeObj.set('stroke', color);
                    activeObj.set('strokeWidth', width);
                }
                canvas.renderAll();
            }

            colorPicker.oninput = updateActiveObjectStyle;
            lineWidthSlider.oninput = updateActiveObjectStyle;

            // ğŸ“· ì‚¬ì§„ ì—…ë¡œë“œ ì²˜ë¦¬ (í™”ë©´ í¬ê¸° ë§ì¶¤ ë¡œì§)
            function processImageFile(file) {
                if (!file || !file.type.match('image.*')) return alert('ì´ë¯¸ì§€ íŒŒì¼ë§Œ ì—…ë¡œë“œ ê°€ëŠ¥í•©ë‹ˆë‹¤.');

                EXIF.getData(file, function() {
                    const orientation = EXIF.getTag(this, "Orientation") || 1;
                    const reader = new FileReader();
                    reader.onload = function(f) {
                        const imgObj = new Image();
                        imgObj.src = f.target.result;
                        imgObj.onload = function() {
                            placeholder.style.display = 'none';
                            dropArea.style.minHeight = 'auto';
                            dropArea.style.border = 'none';
                            dropArea.style.background = 'transparent';

                            let angle = 0;
                            if (orientation === 3) angle = 180;
                            else if (orientation === 6) angle = 90;
                            else if (orientation === 8) angle = 270;

                            let finalWidth = this.width;
                            let finalHeight = this.height;

                            if (angle === 90 || angle === 270) {
                                finalWidth = this.height;
                                finalHeight = this.width;
                            }

                            // ë„í™”ì§€ê°€ í™”ë©´ì„ ëš«ê³  ë‚˜ê°€ì§€ ì•Šë„ë¡ Fit
                            const MAX_WIDTH = dropArea.clientWidth || 900;
                            const MAX_HEIGHT = window.innerHeight * 0.65 || 600; 
                            
                            let scale = Math.min(MAX_WIDTH / finalWidth, MAX_HEIGHT / finalHeight);
                            if (scale > 1) scale = 1;

                            const displayWidth = finalWidth * scale;
                            const displayHeight = finalHeight * scale;

                            // ë‚˜ì¤‘ì— ê³ í™”ì§ˆ ì €ì¥ìš© ë°°ìœ¨ ì €ì¥
                            canvas.exportMultiplier = 1 / scale;

                            canvas.setWidth(displayWidth);
                            canvas.setHeight(displayHeight);

                            const fImg = new fabric.Image(imgObj, {
                                originX: 'center', originY: 'center',
                                left: displayWidth / 2, top: displayHeight / 2, 
                                angle: angle,
                                scaleX: scale,
                                scaleY: scale
                            });

                            canvas.setBackgroundImage(fImg, canvas.renderAll.bind(canvas));
                            const container = document.querySelector('.canvas-container');
                            if(container) container.style.display = 'block';
                            
                            canvas.setViewportTransform([1,0,0,1,0,0]);
                        };
                    };
                    reader.readAsDataURL(file);
                });
            }

            fileInput.onchange = (e) => { processImageFile(e.target.files[0]); fileInput.value = ""; };

            // ë“œë˜ê·¸ ì•¤ ë“œë¡­ íŒŒì¼ ë¡œë“œ
            ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
                dropArea.addEventListener(eventName, (e) => { e.preventDefault(); e.stopPropagation(); }, false);
                document.body.addEventListener(eventName, (e) => { e.preventDefault(); e.stopPropagation(); }, false);
            });

            dropArea.addEventListener('dragover', () => { dropArea.style.borderColor = '#007bff'; dropArea.style.backgroundColor = '#e7f5ff'; });
            ['dragleave', 'drop'].forEach(eventName => { dropArea.addEventListener(eventName, () => { dropArea.style.borderColor = '#adb5bd'; dropArea.style.backgroundColor = '#e9ecef'; }); });
            dropArea.addEventListener('drop', (e) => { if (e.dataTransfer.files.length > 0) processImageFile(e.dataTransfer.files[0]); });

            // ğŸ”„ ì´ˆê¸°í™”
            document.getElementById('btnReset').onclick = function() {
                if (confirm('í¸ì§‘ ë‚´ìš©ê³¼ ì‚¬ì§„ì´ ëª¨ë‘ ì‚¬ë¼ì§‘ë‹ˆë‹¤. ì´ˆê¸°í™”í• ê¹Œìš”?')) {
                    canvas.clear(); canvas.setBackgroundImage(null, canvas.renderAll.bind(canvas));
                    document.querySelector('.canvas-container').style.display = 'none';
                    placeholder.style.display = 'block';
                    dropArea.style.minHeight = '450px'; dropArea.style.border = '2px dashed #adb5bd'; dropArea.style.background = '#e9ecef';
                    document.getElementById('btnApplyMosaic').style.display = 'none';
                }
            };

            // ìˆ˜ë™ íšŒì „ ê¸°ëŠ¥
            function rotateCanvas(angleOffset) {
                const bgImg = canvas.backgroundImage;
                if (!bgImg) return alert("ë¨¼ì € ì‚¬ì§„ì„ ë¶ˆëŸ¬ì™€ì£¼ì„¸ìš”.");

                bgImg.set('angle', bgImg.angle + angleOffset);
                bgImg.setCoords();

                const boundingRect = bgImg.getBoundingRect(true);
                canvas.setWidth(boundingRect.width); canvas.setHeight(boundingRect.height);
                canvas.centerObject(bgImg);
                
                canvas.renderAll(); canvas.setViewportTransform([1, 0, 0, 1, 0, 0]);
            }
            document.getElementById('btnRotateLeft').onclick = () => rotateCanvas(-90);
            document.getElementById('btnRotateRight').onclick = () => rotateCanvas(90);

            // ğŸŒ«ï¸ ëª¨ìì´í¬ ë°•ìŠ¤ ìƒì„±
            document.getElementById('btnMosaic').onclick = () => {
                if (!canvas.backgroundImage) return alert('ì‚¬ì§„ì„ ë¨¼ì € ë¶ˆëŸ¬ì™€ì£¼ì„¸ìš”.');
                
                const vpt = canvas.viewportTransform;
                const centerX = (canvas.width / 2 - vpt[4]) / vpt[0];
                const centerY = (canvas.height / 2 - vpt[5]) / vpt[3];

                const rect = new fabric.Rect({
                    width: 300, height: 150,
                    fill: 'rgba(0, 0, 0, 0.3)',
                    stroke: '#fff', strokeWidth: 3, strokeDashArray: [6, 6],
                    originX: 'center', originY: 'center'
                });
                
                const text = new fabric.Text("ì—¬ê¸°ì— ë†“ê³ \n[âœ… í™•ì •] ë²„íŠ¼ í´ë¦­", {
                    fontSize: 22, fill: '#fff', textAlign: 'center',
                    originX: 'center', originY: 'center', fontWeight: 'bold'
                });
                
                const group = new fabric.Group([rect, text], {
                    left: centerX, top: centerY,
                    originX: 'center', originY: 'center',
                    isMosaicMarker: true,
                    lockRotation: true,
                    cornerColor: '#28a745', borderColor: '#28a745', transparentCorners: false
                });
                
                canvas.add(group);
                canvas.setActiveObject(group);
            };

            function checkMosaicSelection() {
                const activeObj = canvas.getActiveObject();
                const btnApply = document.getElementById('btnApplyMosaic');
                if (activeObj && activeObj.isMosaicMarker) {
                    btnApply.style.display = 'inline-block';
                } else {
                    btnApply.style.display = 'none';
                }
            }
            canvas.on('selection:created', checkMosaicSelection);
            canvas.on('selection:updated', checkMosaicSelection);
            canvas.on('selection:cleared', checkMosaicSelection);

            // ğŸš© í•µì‹¬ ìˆ˜ì • 2: ì™„ë²½í•œ 1:1 ì¢Œí‘œ ë§¤ì¹­ìœ¼ë¡œ ìˆ˜ì •ëœ ëª¨ìì´í¬ ë¡œì§
            function applyMosaic(target) {
                target.visible = false;
                canvas.discardActiveObject();
                canvas.renderAll(); 

                const originalVpt = [...canvas.viewportTransform];
                canvas.setViewportTransform([1, 0, 0, 1, 0, 0]);
                target.setCoords(); 
                
                const bound = target.getBoundingRect();
                const left = Math.max(0, bound.left);
                const top = Math.max(0, bound.top);
                const width = Math.min(canvas.width - left, bound.width);
                const height = Math.min(canvas.height - top, bound.height);

                if(width <= 0 || height <= 0) { 
                    canvas.remove(target);
                    canvas.setViewportTransform(originalVpt);
                    return;
                }

                // ğŸš© Retina ë³´ì • ê°’ì„ ë¹¼ê³  ìˆœìˆ˜ 1:1 ë…¼ë¦¬ í”½ì…€ë§Œ ì¶”ì¶œ (ì»¤ì§ í˜„ìƒ í•´ê²°!)
                const dataURL = canvas.toDataURL({
                    left: left, top: top, width: width, height: height,
                    format: 'png' 
                });
                
                canvas.setViewportTransform(originalVpt);
                canvas.renderAll();
                
                fabric.Image.fromURL(dataURL, function(img) {
                    img.set({
                        left: left, top: top, originX: 'left', originY: 'top',
                        cornerColor: '#007bff', borderColor: '#007bff', transparentCorners: false
                    });
                    
                    const blockSize = Math.max(8, parseInt(document.getElementById('lineWidth').value) || 15);
                    img.filters.push(new fabric.Image.filters.Pixelate({ blocksize: blockSize }));
                    img.applyFilters();
                    
                    canvas.add(img);
                    canvas.remove(target); 
                    canvas.setActiveObject(img);
                    canvas.renderAll();
                    document.getElementById('btnApplyMosaic').style.display = 'none';
                });
            }

            document.getElementById('btnApplyMosaic').onclick = () => {
                const activeObj = canvas.getActiveObject();
                if (activeObj && activeObj.isMosaicMarker) applyMosaic(activeObj);
            };

            window.addEventListener('keydown', (e) => {
                const activeObj = canvas.getActiveObject();
                if (e.key === 'Enter' && activeObj && activeObj.isMosaicMarker) {
                    applyMosaic(activeObj);
                }
                if ((e.key === 'Delete' || e.key === 'Backspace') && !activeObj?.isEditing) {
                    canvas.remove(activeObj);
                }
            });

            // í™”ë©´ ì¤Œ & ì´ë™
            canvas.on('mouse:wheel', function(opt) {
                var delta = opt.e.deltaY; var zoom = canvas.getZoom();
                zoom *= 0.999 ** delta; if (zoom > 20) zoom = 20; if (zoom < 0.1) zoom = 0.1;
                canvas.zoomToPoint({ x: opt.e.offsetX, y: opt.e.offsetY }, zoom);
                opt.e.preventDefault(); opt.e.stopPropagation();
            });
            canvas.on('mouse:down', function(opt) { if (opt.e.altKey) { this.isDragging = true; this.lastPosX = opt.e.clientX; this.lastPosY = opt.e.clientY; canvas.defaultCursor = 'grabbing'; } });
            canvas.on('mouse:move', function(opt) { if (this.isDragging) { var vpt = this.viewportTransform; vpt[4] += opt.e.clientX - this.lastPosX; vpt[5] += opt.e.clientY - this.lastPosY; this.requestRenderAll(); this.lastPosX = opt.e.clientX; this.lastPosY = opt.e.clientY; } });
            canvas.on('mouse:up', function() { this.isDragging = false; canvas.defaultCursor = 'default'; });

            // ë„í˜• ë„êµ¬
            document.getElementById('btnRect').onclick = () => canvas.add(new fabric.Rect({ left: 100, top: 100, width: 200, height: 150, fill: 'transparent', stroke: colorPicker.value, strokeWidth: parseInt(lineWidthSlider.value), strokeUniform: true }));
            document.getElementById('btnHollowCircle').onclick = () => canvas.add(new fabric.Circle({ left: 100, top: 100, radius: 80, fill: 'transparent', stroke: colorPicker.value, strokeWidth: parseInt(lineWidthSlider.value), strokeUniform: true }));
            document.getElementById('btnCircle').onclick = () => canvas.add(new fabric.Circle({ left: 100, top: 100, radius: 80, fill: colorPicker.value }));
            document.getElementById('btnArrow').onclick = () => canvas.add(new fabric.Path('M 0 20 L 80 20 L 80 0 L 120 30 L 80 60 L 80 40 L 0 40 Z', { left: 100, top: 100, fill: colorPicker.value }));
            document.getElementById('btnText').onclick = () => canvas.add(new fabric.IText('í…ìŠ¤íŠ¸ ì…ë ¥', { left: 100, top: 100, fill: colorPicker.value, fontSize: 50 }));
            document.getElementById('btnEmoji').onclick = () => canvas.add(new fabric.Text(emojiSelect.value, { left: 100, top: 100, fontSize: 100 }));
            document.getElementById('btnDelete').onclick = () => canvas.remove(canvas.getActiveObject());
            
            document.getElementById('btnSticker').onclick = () => document.getElementById('stickerLoader').click();
            document.getElementById('stickerLoader').onchange = (e) => {
                const reader = new FileReader();
                reader.onload = (f) => fabric.Image.fromURL(f.target.result, (img) => { img.scale(0.2); canvas.add(img).centerObject(img).setActiveObject(img); });
                reader.readAsDataURL(e.target.files[0]);
            };

            // ê³ í™”ì§ˆ ì €ì¥
            document.getElementById('btnSave').onclick = () => {
                canvas.discardActiveObject().renderAll();
                const originalVpt = [...canvas.viewportTransform];
                canvas.setViewportTransform([1, 0, 0, 1, 0, 0]);
                
                const link = document.createElement('a');
                link.download = 'SIMPLEIMG_EDITED.png';
                
                const finalMultiplier = canvas.exportMultiplier || 1;
                link.href = canvas.toDataURL({ format: 'png', quality: 1, multiplier: finalMultiplier });
                link.click();
                
                canvas.setViewportTransform(originalVpt);
            };
        };
    </script>
</body>
</html>
